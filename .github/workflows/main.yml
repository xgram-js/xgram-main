on:
    push:
        branches:
            - main
name: all the stuff

jobs:
    loc-badge:
        permissions:
            contents: write
        runs-on: ubuntu-latest
        name: all the stuff
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Launch the LoC
              uses: shadowmoose/GHA-LoC-Badge@1.0.0
              id: badge
              with:
                  debug: true
                  directory: ./
                  badge: ./output/badge.svg
                  ignore: "node_modules/|README|package*.json"

            - name: Print the output
              run: |
                  echo "Scanned: ${{ steps.badge.outputs.counted_files }}";
                  echo "Line Count: ${{ steps.badge.outputs.total_lines }}";

            - name: Deploy to image-data branch
              uses: peaceiris/actions-gh-pages@v3
              with:
                  publish_dir: ./output
                  publish_branch: image-data
                  github_token: ${{ secrets.GITHUB_TOKEN }}
                  user_name: "github-actions[bot]"
                  user_email: "github-actions[bot]@users.noreply.github.com"
